/*ajustest*/
ALTER TABLE ajustest 
CHANGE COLUMN AJUNUM AJUNUM MEDIUMINT NOT NULL,
CHANGE COLUMN AJUOBS AJUOBS VARCHAR(60) NULL DEFAULT NULL,
CHANGE COLUMN AJUCAN AJUCAN SMALLINT NOT NULL,
DROP COLUMN ID,
DROP PRIMARY KEY,
ADD PRIMARY KEY (AJUNUM);

UPDATE ajustest
SET AJUOBS=TRIM(AJUOBS);

/*cliente1*/
ALTER TABLE cliente1
CHANGE COLUMN TIPCOD TIPCOD CHAR(4) NULL DEFAULT NULL,
CHANGE COLUMN CLICOD CLICOD MEDIUMINT NULL DEFAULT NULL,
CHANGE COLUMN CLIPRODPRE CLIPRODPRE FLOAT NULL DEFAULT NULL;

/*clientes*/
/*duplicated 
1442,1445*/
ALTER TABLE clientes
CHANGE COLUMN CLINOM CLINOM VARCHAR(45) NULL DEFAULT NULL,
CHANGE COLUMN CLIDOM CLIDOM VARCHAR(45) NULL DEFAULT NULL,
CHANGE COLUMN CLILOC CLILOC VARCHAR(45) NULL DEFAULT NULL,
CHANGE COLUMN CLITEL CLITEL VARCHAR(25) NULL DEFAULT NULL,
CHANGE COLUMN CLICEL CLICEL VARCHAR(25) NULL DEFAULT NULL,
CHANGE COLUMN CLIFP CLIFP VARCHAR(25) NULL DEFAULT NULL,
CHANGE COLUMN CLIFAN CLIFAN VARCHAR(35) NULL DEFAULT NULL,
CHANGE COLUMN TRACOD TRACOD MEDIUMINT NULL DEFAULT NULL,
CHANGE COLUMN CLISALDEB CLISALDEB FLOAT NULL DEFAULT NULL,
CHANGE COLUMN CLISALHAB CLISALHAB FLOAT NULL DEFAULT NULL,
CHANGE COLUMN CLISALIMP CLISALIMP FLOAT NULL DEFAULT NULL,
ADD COLUMN VENCOD MEDIUMINT NULL AFTER TRACOD,
ADD COLUMN CLIEST CHAR(1) NULL DEFAULT 'A' AFTER VENCOD,
DROP COLUMN CLITIPO,
DROP COLUMN LOCCOD,
DROP COLUMN ID,
DROP PRIMARY KEY,
ADD PRIMARY KEY (CLICOD);

UPDATE clientes
SET CLINOM=TRIM(CLINOM),
CLIDOM=TRIM(CLIDOM),
CLILOC=TRIM(CLILOC),
CLITEL=TRIM(CLITEL),
CLICEL=TRIM(CLICEL),
CLIFP=TRIM(CLIFP),
CLIFAN=TRIM(CLIFAN);

UPDATE clientes c
INNER JOIN vendedo1 v ON v.CLICOD = c.CLICOD
SET c.VENCOD = v.VENCOD;

UPDATE clientes 
SET CLIEST = 'I' 
WHERE VENCOD IS NULL OR CLINOM = '';

/*concepto*/
ALTER TABLE concepto 
DROP COLUMN CONVEN,
DROP COLUMN ID,
CHANGE COLUMN CONNUM CONNUM MEDIUMINT NOT NULL AUTO_INCREMENT,
CHANGE COLUMN CONCLI CONCLI MEDIUMINT NULL DEFAULT NULL,
CHANGE COLUMN CONDES CONDES VARCHAR(45) NULL DEFAULT NULL,
CHANGE COLUMN CONCANDEB CONCANDEB FLOAT NULL DEFAULT NULL,
CHANGE COLUMN CONCANHAB CONCANHAB FLOAT NULL DEFAULT NULL,
DROP PRIMARY KEY,
ADD PRIMARY KEY (CONNUM);

UPDATE concepto
SET CONDES=TRIM(CONDES);

/*facturas*/ 
ALTER TABLE facturas 
DROP COLUMN USUCOD,
DROP COLUMN FACPV,
CHANGE COLUMN FACNUM FACNUM MEDIUMINT NULL DEFAULT NULL,
CHANGE COLUMN FACREMNUM FACREMNUM MEDIUMINT NULL DEFAULT NULL,
CHANGE COLUMN CLICOD CLICOD MEDIUMINT NULL DEFAULT NULL,
CHANGE COLUMN VENCOD VENCOD MEDIUMINT NULL DEFAULT NULL,
CHANGE COLUMN FACOFINUM FACOFINUM MEDIUMINT NULL DEFAULT NULL,
CHANGE COLUMN FACIVA FACIVA FLOAT NULL DEFAULT NULL,
CHANGE COLUMN FACNET FACNET FLOAT NULL DEFAULT NULL,
CHANGE COLUMN FACDES FACDES FLOAT NULL DEFAULT NULL;

/*factura1*/
ALTER TABLE factura1 
DROP COLUMN FACPV,
CHANGE COLUMN FACNUM FACNUM MEDIUMINT NULL DEFAULT NULL,
CHANGE COLUMN FACCAN FACCAN SMALLINT NULL DEFAULT NULL,
CHANGE COLUMN FACPRE FACPRE FLOAT NULL DEFAULT NULL;

/*iva*/
ALTER TABLE iva
CHANGE COLUMN IVADES IVADES VARCHAR(25) NULL DEFAULT NULL,
ADD COLUMN IVAEST CHAR(1) NULL DEFAULT 'A' AFTER IVADES;

UPDATE iva
SET IVADES=TRIM(IVADES);

/*numeros*/
ALTER TABLE numeros
CHANGE COLUMN NUMDES NUMDES VARCHAR(25) NULL DEFAULT NULL,
CHANGE COLUMN NUMCOD NUMCOD MEDIUMINT NULL DEFAULT NULL,
CHANGE COLUMN NUMVAL NUMVAL MEDIUMINT NULL DEFAULT NULL,
CHANGE COLUMN NUMPV NUMPV MEDIUMINT NULL DEFAULT NULL;

UPDATE numeros
SET NUMDES=TRIM(NUMDES);

/*pagos*/
ALTER TABLE pagos 
CHANGE COLUMN PAGNUM PAGNUM MEDIUMINT NULL DEFAULT NULL,
CHANGE COLUMN CLICOD CLICOD MEDIUMINT NULL DEFAULT NULL;

/*pagos1*/
DELETE FROM pagos1
WHERE PAGNUM NOT IN (SELECT PAGNUM FROM pagos);

DELETE FROM pagos1 
WHERE REMNUM NOT IN (SELECT REMNUM FROM remitos);

ALTER TABLE pagos1 
CHANGE COLUMN PAGNUM PAGNUM MEDIUMINT NULL DEFAULT NULL,
CHANGE COLUMN REMNUM REMNUM MEDIUMINT NULL DEFAULT NULL;

/*pagos2*/
DELETE FROM pagos2 
WHERE PAGNUM NOT IN (SELECT PAGNUM FROM pagos);

ALTER TABLE pagos2
CHANGE COLUMN PAGCHENUM PAGCHENUM VARCHAR(12) NULL DEFAULT NULL,
CHANGE COLUMN PAGCHEBAN PAGCHEBAN VARCHAR(25) NULL DEFAULT NULL,
CHANGE COLUMN PAGOBS PAGOBS VARCHAR(20) NULL DEFAULT NULL,
CHANGE COLUMN PAGSEC PAGSEC TINYINT NULL DEFAULT NULL,
CHANGE COLUMN PAGIMP PAGIMP FLOAT NULL DEFAULT NULL;

UPDATE pagos2
SET PAGCHENUM=TRIM(PAGCHENUM),
PAGCHEBAN=TRIM(PAGCHEBAN),
PAGOBS=TRIM(PAGOBS);

/*producto*/
UPDATE producto 
SET PRODSEX=SUBSTRING(PRODSEX,1,1);

ALTER TABLE producto
CHANGE COLUMN TIPCOD TIPCOD CHAR(4) NULL DEFAULT NULL,
CHANGE COLUMN SUBTIPCOD SUBTIPCOD CHAR(6) NULL DEFAULT NULL,
CHANGE COLUMN PRODDES PRODDES VARCHAR(45) NULL DEFAULT NULL,
CHANGE COLUMN PRODSEX PRODSEX CHAR(1) NOT NULL,
CHANGE COLUMN PRODSTO PRODSTO SMALLINT NULL DEFAULT NULL,
CHANGE COLUMN PRODSINI PRODSINI SMALLINT NULL DEFAULT NULL,
CHANGE COLUMN PRODPRE PRODPRE FLOAT NULL DEFAULT NULL;

UPDATE producto
SET PRODDES=TRIM(PRODDES);

UPDATE producto
SET PRODSEX = 'I'
WHERE PRODSEX = '';

/*provinci*/
ALTER TABLE provinci 
CHANGE COLUMN PRONOM PRONOM VARCHAR(60) NOT NULL;

UPDATE provinci
SET PRONOM=TRIM(PRONOM);

/*remitos*/
ALTER TABLE remitos 
DROP COLUMN ID,
DROP COLUMN REMFACPV,
DROP COLUMN REMLIQNUM,
DROP COLUMN REMPED,
DROP COLUMN USUCOD,
CHANGE COLUMN REMNUM REMNUM MEDIUMINT NOT NULL,
CHANGE COLUMN VENCOD VENCOD MEDIUMINT NULL DEFAULT NULL,
CHANGE COLUMN REMFACNUM REMFACNUM MEDIUMINT NULL DEFAULT NULL,
CHANGE COLUMN CLICOD CLICOD MEDIUMINT NULL DEFAULT NULL,
CHANGE COLUMN REMPAGNUM REMPAGNUM MEDIUMINT NULL DEFAULT NULL,
CHANGE COLUMN REMDES REMDES FLOAT NULL DEFAULT NULL,
DROP PRIMARY KEY,
ADD PRIMARY KEY (REMNUM);

/*remiitem*/
ALTER TABLE remiitem 
DROP COLUMN ID,
CHANGE COLUMN REMNUM REMNUM MEDIUMINT NOT NULL,
CHANGE COLUMN REMCAN REMCAN SMALLINT NULL DEFAULT NULL,
CHANGE COLUMN REMPRE REMPRE FLOAT NULL DEFAULT NULL;

DELETE FROM remiitem 
WHERE REMNUM NOT IN (SELECT REMNUM FROM remitos);

/*tipo*/
DELETE FROM tipo 
WHERE TIPCOD NOT IN (SELECT TIPCOD FROM tipo1);

ALTER TABLE tipo
CHANGE COLUMN TIPCOD TIPCOD CHAR(4) NULL DEFAULT NULL,
CHANGE COLUMN TIPDES TIPDES VARCHAR(45) NULL DEFAULT NULL,
ADD COLUMN TIPEST CHAR(1) NULL DEFAULT 'A' AFTER TIPDES;

UPDATE tipo
SET TIPDES=TRIM(TIPDES);

UPDATE tipo
SET TIPEST = 'I'
WHERE TIPDES = '';

/*tipo1*/
ALTER TABLE tipo1
CHANGE COLUMN TIPCOD TIPCOD CHAR(4) NULL DEFAULT NULL,
CHANGE COLUMN SUBTIPCOD SUBTIPCOD CHAR(6) NULL DEFAULT NULL,
CHANGE COLUMN SUBTIPDES SUBTIPDES VARCHAR(45) NULL DEFAULT NULL,
ADD COLUMN SUBTIPEST CHAR(1) NULL DEFAULT 'A' AFTER SUBTIPDES;

UPDATE tipo1
SET SUBTIPDES=TRIM(SUBTIPDES);

/*transpor*/
ALTER TABLE transpor
CHANGE COLUMN TRANOM TRANOM VARCHAR(45) NULL DEFAULT NULL,
CHANGE COLUMN TRADOM TRADOM VARCHAR(45) NULL DEFAULT NULL,
CHANGE COLUMN TRALOC TRALOC VARCHAR(45) NULL DEFAULT NULL,
CHANGE COLUMN TRATEL TRATEL VARCHAR(25) NULL DEFAULT NULL,
CHANGE COLUMN TRAOBS TRAOBS VARCHAR(60) NULL DEFAULT NULL,
ADD COLUMN TRAEST CHAR(1) NULL DEFAULT 'A' AFTER TRAOBS;

UPDATE transpor
SET TRANOM=TRIM(TRANOM),
TRADOM=TRIM(TRADOM),
TRALOC=TRIM(TRALOC),
TRATEL=TRIM(TRATEL),
TRAOBS=TRIM(TRAOBS);

/*vendedor*/
ALTER TABLE vendedor
CHANGE COLUMN VENNOM VENNOM VARCHAR(45) NULL DEFAULT NULL,
CHANGE COLUMN VENDOM VENDOM VARCHAR(45) NULL DEFAULT NULL,
CHANGE COLUMN VENLOC VENLOC VARCHAR(45) NULL DEFAULT NULL,
CHANGE COLUMN VENTEL VENTEL VARCHAR(25) NULL DEFAULT NULL,
CHANGE COLUMN VENCEL VENCEL VARCHAR(25) NULL DEFAULT NULL,
CHANGE COLUMN VENOBS VENOBS VARCHAR(60) NULL DEFAULT NULL,
CHANGE COLUMN VENSALDEB VENSALDEB FLOAT NULL DEFAULT NULL,
CHANGE COLUMN VENSALHAB VENSALHAB FLOAT NULL DEFAULT NULL,
CHANGE COLUMN VENSALIMP VENSALIMP FLOAT NULL DEFAULT NULL,
ADD COLUMN VENEST CHAR(1) NULL DEFAULT 'A' AFTER VENOBS;

UPDATE vendedor
SET VENNOM=TRIM(VENNOM),
VENDOM=TRIM(VENDOM),
VENLOC=TRIM(VENLOC),
VENTEL=TRIM(VENTEL),
VENCEL=TRIM(VENCEL),
VENOBS=TRIM(VENOBS);

UPDATE vendedor
SET VENEST = 'I'
WHERE VENNOM = '';

/*vendedo1*/
DROP TABLE vendedo1;